{
  "ai_generated": false,
  "concept_tags": [
    "file_io",
    "pathlib",
    "reading_writing"
  ],
  "content": "## 8INPUT VALIDATION\n\nInput validation code checks that values entered by the user, such as text from the input() function, are formatted correctly. For example, if you want users to enter their ages, your code shouldn\u2019t accept nonsensical answers such as negative numbers (which are outside the range of acceptable integers) or words (which are the wrong data type). Input validation can also prevent bugs or security vulnerabilities. If you implement a withdrawFromAccount() function that takes an argument for the amount to subtract from an account, you need to ensure the amount is a positive number. If the withdrawFromAccount() function subtracts a negative number from the account, the \u201cwithdrawal\u201d will end up adding money!\n\nTypically, we perform input validation by repeatedly asking the user for input until they enter valid text, as in the following example:\n\nwhile True: print('Enter your age:') age = input() try: age = int(age) except: print('Please use numeric digits.') continue if age < 1: print('Please enter a positive number.') continue break print(f'Your age is {age}.')\n\nWhen you run this program, the output could look like this:\n\nEnter your age: five Please use numeric digits. Enter your age: -2 Please enter a positive number. Enter your age: 30 Your age is 30.\n\nWhen you run this code, you\u2019ll be prompted for your age until you enter a valid one. This ensures that by the time the execution leaves the while loop, the age variable will contain a valid value that won\u2019t crash the program later on.\n\nHowever, writing input validation code for every input() call in your program quickly becomes tedious. Also, you may miss certain cases and allow invalid input to pass through your checks. In this chapter, you\u2019ll learn how to use the third-party PyInputPlus module for input validation.\n\n### The PyInputPlus Module\n\nPyInputPlus contains functions similar to input() for several kinds of data: numbers, dates, email addresses, and more. If the user ever enters invalid input, such as a badly formatted date or a number that is outside of an intended range, PyInputPlus will reprompt them for input just like our code in the previous section did. PyInputPlus also has other useful features like a limit for the number of times it reprompts users and a timeout if users are required to respond within a time limit.\n\nPyInputPlus is not a part of the Python Standard Library, so you must install it separately using Pip. To install PyInputPlus, run pip install --user pyinputplus from the command line. Appendix A has complete instructions for installing third-party modules. To check if PyInputPlus installed correctly, import it in the interactive shell:\n\n>>> import pyinputplus\n\nIf no errors appear when you import the module, it has been successfully installed.\n\nPyInputPlus has several functions for different kinds of input:\n\ninputStr() Is like the built-in input() function but has the general PyInputPlus features. You can also pass a custom validation function to it\n\ninputNum() Ensures the user enters a number and returns an int or float, depending on if the number has a decimal point in it\n\ninputChoice() Ensures the user enters one of the provided choices\n\ninputMenu() Is similar to inputChoice() , but provides a menu with numbered or lettered options\n\ninputDatetime() Ensures the user enters a date and time\n\ninputYesNo() Ensures the user enters a \u201cyes\u201d or \u201cno\u201d response\n\ninputBool() Is similar to inputYesNo() , but takes a \u201cTrue\u201d or \u201cFalse\u201d response and returns a Boolean value\n\ninputEmail() Ensures the user enters a valid email address\n\ninputFilepath() Ensures the user enters a valid file path and filename, and can optionally check that a file with that name exists\n\ninputPassword() Is like the built-in input() , but displays * characters as the user types so that passwords, or other sensitive information, aren\u2019t displayed on the screen\n\nThese functions will automatically reprompt the user for as long as they enter invalid input:\n\n>>> import pyinputplus as pyip >>> response = pyip.inputNum() five 'five' is not a number. 42 >>> response 42\n\nThe as pyip code in the import statement saves us from typing pyinputplus each time we want to call a PyInputPlus function. Instead we can use the shorter pyip name. If you take a look at the example, you see that unlike input() , these functions return an int or float value: 42 and 3.14 instead of the strings '42' and '3.14' .\n\nJust as you can pass a string to input() to provide a prompt, you can pass a string to a PyInputPlus function\u2019s prompt keyword argument to display a prompt:\n\n>>> response = input('Enter a number: ') Enter a number: 42 >>> response '42' >>> import pyinputplus as pyip >>> response = pyip.inputInt(prompt='Enter a number: ') Enter a number: cat 'cat' is not an integer. Enter a number: 42 >>> response 42\n\nUse Python\u2019s help() function to find out more about each of these functions. For example, help(pyip.inputChoice) displays help information for the inputChoice() function. Complete documentation can be found at https://pyinputplus.readthedocs.io/ .\n\nUnlike Python\u2019s built-in input() , PyInputPlus functions have several additional features for input validation, as shown in the next section.\n\n#### The min, max, greaterThan, and lessThan Keyword Arguments\n\nThe inputNum() , inputInt() , and inputFloat() functions, which accept int and float numbers, also have min , max , greaterThan , and lessThan keyword arguments for specifying a range of valid values. For example, enter the following into the interactive shell:\n\n>>> import pyinputplus as pyip >>> response = pyip.inputNum('Enter num: ', min=4) Enter num: 3 Input must be at minimum 4. Enter num: 4 >>> response 4 >>> response = pyip.inputNum('Enter num: ', greaterThan=4) Enter num: 4 Input must be greater than 4. Enter num: 5 >>> response 5 >>> response = pyip.inputNum('>', min=4, lessThan=6) Enter num: 6 Input must be less than 6. Enter num: 3 Input must be at minimum 4. Enter num: 4 >>> response 4\n\nThese keyword arguments are optional, but if supplied, the input cannot be less than the min argument or greater than the max argument (though the input can be equal to them). Also, the input must be greater than the greaterThan and less than the lessThan arguments (that is, the input cannot be equal to them).\n\n#### The blank Keyword Argument\n\nBy default, blank input isn\u2019t allowed unless the blank keyword argument is set to True :\n\n>>> import pyinputplus as pyip >>> response = pyip.inputNum('Enter num: ') Enter num: (blank input entered here) Blank values are not allowed. Enter num: 42 >>> response 42 >>> response = pyip.inputNum(blank=True) (blank input entered here) >>> response ''\n\nUse blank=True if you\u2019d like to make input optional so that the user doesn\u2019t need to enter anything.\n\n#### The limit, timeout, and default Keyword Arguments\n\nBy default, the PyInputPlus functions will continue to ask the user for valid input forever (or for as long as the program runs). If you\u2019d like a function to stop asking the user for input after a certain number of tries or a certain amount of time, you can use the limit and timeout keyword arguments. Pass an integer for the limit keyword argument to determine how many attempts a PyInputPlus function will make to receive valid input before giving up, and pass an integer for the timeout keyword argument to determine how many seconds the user has to enter valid input before the PyInputPlus function gives up.\n\nIf the user fails to enter valid input, these keyword arguments will cause the function to raise a RetryLimitException or TimeoutException , respectively. For example, enter the following into the interactive shell:\n\n>>> import pyinputplus as pyip >>> response = pyip.inputNum(limit=2) blah 'blah' is not a number. Enter num: number 'number' is not a number. Traceback (most recent call last): --snip-- pyinputplus.RetryLimitException >>> response = pyip.inputNum(timeout=10) 42 (entered after 10 seconds of waiting) Traceback (most recent call last): --snip-- pyinputplus.TimeoutException\n\nWhen you use these keyword arguments and also pass a default keyword argument, the function returns the default value instead of raising an exception. Enter the following into the interactive shell:\n\n>>> response = pyip.inputNum(limit=2, default='N/A') hello 'hello' is not a number. world 'world' is not a number. >>> response 'N/A'\n\nInstead of raising RetryLimitException , the inputNum() function simply returns the string 'N/A' .\n\n#### The allowRegexes and blockRegexes Keyword Arguments\n\nYou can also use regular expressions to specify whether an input is allowed or not. The allowRegexes and blockRegexes keyword arguments take a list of regular expression strings to determine what the PyInputPlus function will accept or reject as valid input. For example, enter the following code into the interactive shell so that inputNum() will accept Roman numerals in addition to the usual numbers:\n\n>>> import pyinputplus as pyip >>> response = pyip.inputNum(allowRegexes=[r'(I|V|X|L|C|D|M)+', r'zero']) XLII >>> response 'XLII' >>> response = pyip.inputNum(allowRegexes=[r'(i|v|x|l|c|d|m)+', r'zero']) xlii >>> response 'xlii'\n\nOf course, this regex affects only what letters the inputNum() function will accept from the user; the function will still accept Roman numerals with invalid ordering such as 'XVX' or 'MILLI' because the r'(I|V|X|L|C|D|M)+' regular expression accepts those strings.\n\nYou can also specify a list of regular expression strings that a PyInputPlus function won\u2019t accept by using the blockRegexes keyword argument. Enter the following into the interactive shell so that inputNum() won\u2019t accept even numbers:\n\n>>> import pyinputplus as pyip >>> response = pyip.inputNum(blockRegexes=[r'[02468]$']) 42 This response is invalid. 44 This response is invalid. 43 >>> response 43\n\nIf you specify both an allowRegexes and blockRegexes argument, the allow list overrides the block list. For example, enter the following into the interactive shell, which allows 'caterpillar' and 'category' but blocks anything else that has the word 'cat' in it:\n\n>>> import pyinputplus as pyip >>> response = pyip.inputStr(allowRegexes=[r'caterpillar', 'category'], blockRegexes=[r'cat']) cat This response is invalid. catastrophe This response is invalid. category >>> response 'category'\n\nThe PyInputPlus module\u2019s functions can save you from writing tedious input validation code yourself. But there\u2019s more to the PyInputPlus module than what has been detailed here. You can examine its full documentation online at https://pyinputplus.readthedocs.io/ .\n\n#### Passing a Custom Validation Function to inputCustom()\n\nYou can write a function to perform your own custom validation logic by passing the function to inputCustom() . For example, say you want the user to enter a series of digits that adds up to 10. There is no pyinputplus.inputAddsUpToTen() function, but you can create your own function that:\n\n- Accepts a single string argument of what the user entered\n- Raises an exception if the string fails validation\n- Returns None (or has no return statement) if inputCustom() should return the string unchanged\n- Returns a non- None value if inputCustom() should return a different string from the one the user entered\n- Is passed as the first argument to inputCustom()\n\nFor example, we can create our own addsUpToTen() function, and then pass it to inputCustom() . Note that the function call looks like inputCustom(addsUpToTen) and not inputCustom(addsUpToTen()) because we are passing the addsUpToTen() function itself to inputCustom() , not calling addsUpToTen() and passing its return value.\n\n>>> import pyinputplus as pyip >>> def addsUpToTen(numbers): ... numbersList = list(numbers) ... for i, digit in enumerate(numbersList): ... numbersList[i] = int(digit) ... if sum(numbersList) != 10: ... raise Exception('The digits must add up to 10, not %s.' % (sum(numbersList))) ... return int(numbers) # Return an int form of numbers. ... >>> response = pyip.inputCustom(addsUpToTen) # No parentheses after addsUpToTen here. 123 The digits must add up to 10, not 6. 1235 The digits must add up to 10, not 11. 1234 >>> response # inputStr() returned an int, not a string. 1234 >>> response = pyip.inputCustom(addsUpToTen) hello invalid literal for int() with base 10: 'h' 55 >>> response\n\nThe inputCustom() function also supports the general PyInputPlus features, such as the blank , limit , timeout , default , allowRegexes , and blockRegexes keyword arguments. Writing your own custom validation function is useful when it\u2019s otherwise difficult or impossible to write a regular expression for valid input, as in the \u201cadds up to 10\u201d example.\n\n### Project: How to Keep an Idiot Busy for Hours\n\nLet\u2019s use PyInputPlus to create a simple program that does the following:\n\n- Ask the user if they\u2019d like to know how to keep an idiot busy for hours.\n- If the user answers no, quit.\n- If the user answers yes, go to Step 1.\n\nOf course, we don\u2019t know if the user will enter something besides \u201cyes\u201d or \u201cno,\u201d so we need to perform input validation. It would also be convenient for the user to be able to enter \u201cy\u201d or \u201cn\u201d instead of the full words. PyInputPlus\u2019s inputYesNo() function will handle this for us and, no matter what case the user enters, return a lowercase 'yes' or 'no' string value.\n\nWhen you run this program, it should look like the following:\n\nWant to know how to keep an idiot busy for hours? sure 'sure' is not a valid yes/no response. Want to know how to keep an idiot busy for hours? yes Want to know how to keep an idiot busy for hours? y Want to know how to keep an idiot busy for hours? Yes Want to know how to keep an idiot busy for hours? YES Want to know how to keep an idiot busy for hours? YES!!!!!! 'YES!!!!!!' is not a valid yes/no response. Want to know how to keep an idiot busy for hours? TELL ME HOW TO KEEP AN IDIOT BUSY FOR HOURS. 'TELL ME HOW TO KEEP AN IDIOT BUSY FOR HOURS.' is not a valid yes/no response. Want to know how to keep an idiot busy for hours? no Thank you. Have a nice day.\n\nOpen a new file editor tab and save it as idiot.py . Then enter the following code:\n\nimport pyinputplus as pyip\n\nThis imports the PyInputPlus module. Since pyinputplus is a bit much to type, we\u2019ll use the name pyip for short.\n\nwhile True: prompt = 'Want to know how to keep an idiot busy for hours?\\n' response = pyip.inputYesNo(prompt)\n\nNext, while True: creates an infinite loop that continues to run until it encounters a break statement. In this loop, we call pyip.inputYesNo() to ensure that this function call won\u2019t return until the user enters a valid answer.\n\nif response == 'no': break\n\nThe pyip.inputYesNo() call is guaranteed to only return either the string yes or the string no . If it returned no , then our program breaks out of the infinite loop and continues to the last line, which thanks the user:\n\nprint('Thank you. Have a nice day.')\n\nOtherwise, the loop iterates once again.\n\nYou can also make use of the inputYesNo() function in non-English languages by passing yesVal and noVal keyword arguments. For example, the Spanish version of this program would have these two lines:\n\nprompt = '\u00bfQuieres saber c\u00f3mo mantener ocupado a un idiota durante horas?\\n' response = pyip.inputYesNo(prompt, yesVal='s\u00ed', noVal='no') if response == 's\u00ed':\n\nNow the user can enter either s\u00ed or s (in lower- or uppercase) instead of yes or y for an affirmative answer.\n\n### Project: Multiplication Quiz\n\nPyInputPlus\u2019s features can be useful for creating a timed multiplication quiz. By setting the allowRegexes , blockRegexes , timeout , and limit keyword argument to pyip.inputStr() , you can leave most of the implementation to PyInputPlus. The less code you need to write, the faster you can write your programs. Let\u2019s create a program that poses 10 multiplication problems to the user, where the valid input is the problem\u2019s correct answer. Open a new file editor tab and save the file as multiplicationQuiz.py .\n\nFirst, we\u2019ll import pyinputplus , random , and time . We\u2019ll keep track of how many questions the program asks and how many correct answers the user gives with the variables numberOfQuestions and correctAnswers . A for loop will repeatedly pose a random multiplication problem 10 times:\n\nimport pyinputplus as pyip import random, time numberOfQuestions = 10 correctAnswers = 0 for questionNumber in range(numberOfQuestions):\n\nInside the for loop, the program will pick two single-digit numbers to multiply. We\u2019ll use these numbers to create a #Q: N \u00d7 N = prompt for the user, where Q is the question number (1 to 10) and N are the two numbers to multiply.\n\n# Pick two random numbers: num1 = random.randint(0, 9) num2 = random.randint(0, 9) prompt = '#%s: %s x %s = ' % (questionNumber, num1, num2)\n\nThe pyip.inputStr() function will handle most of the features of this quiz program. The argument we pass for allowRegexes is a list with the regex string '^%s$' , where %s is replaced with the correct answer. The ^ and % characters ensure that the answer begins and ends with the correct number, though PyInputPlus trims any whitespace from the start and end of the user\u2019s response first just in case they inadvertently pressed the spacebar before or after their answer. The argument we pass for blocklistRegexes is a list with ('.*', 'Incorrect!') . The first string in the tuple is a regex that matches every possible string. Therefore, if the user response doesn\u2019t match the correct answer, the program will reject any other answer they provide. In that case, the 'Incorrect!' string is displayed and the user is prompted to answer again. Additionally, passing 8 for timeout and 3 for limit will ensure that the user only has 8 seconds and 3 tries to provide a correct answer:\n\ntry: # Right answers are handled by allowRegexes. # Wrong answers are handled by blockRegexes, with a custom message. pyip.inputStr(prompt, allowRegexes=['^%s$' % (num1 * num2)], blockRegexes=[('.*', 'Incorrect!')], timeout=8, limit=3)\n\nIf the user answers after the 8-second timeout has expired, even if they answer correctly, pyip.inputStr() raises a TimeoutException exception. If the user answers incorrectly more than 3 times, it raises a RetryLimitException exception. Both of these exception types are in the PyInputPlus module, so pyip. needs to prepend them:\n\nexcept pyip.TimeoutException: print('Out of time!') except pyip.RetryLimitException: print('Out of tries!')\n\nRemember that, just like how else blocks can follow an if or elif block, they can optionally follow the last except block. The code inside the following else block will run if no exception was raised in the try block. In our case, that means the code runs if the user entered the correct answer:\n\nelse: # This block runs if no exceptions were raised in the try block. print('Correct!') correctAnswers += 1\n\nNo matter which of the three messages, \u201cOut of time!\u201d, \u201cOut of tries!\u201d, or \u201cCorrect!\u201d, displays, let\u2019s place a 1-second pause at the end of the for loop to give the user time to read it. After the program has asked 10 questions and the for loop continues, let\u2019s show the user how many correct answers they made:\n\ntime.sleep(1) # Brief pause to let user see the result. print('Score: %s / %s' % (correctAnswers, numberOfQuestions))\n\nPyInputPlus is flexible enough that you can use it in a wide variety of programs that take keyboard input from the user, as demonstrated by the programs in this chapter.\n\n### Summary\n\nIt\u2019s easy to forget to write input validation code, but without it, your programs will almost certainly have bugs. The values you expect users to enter and the values they actually enter can be completely different, and your programs need to be robust enough to handle these exceptional cases. You can use regular expressions to create your own input validation code, but for common cases, it\u2019s easier to use an existing module, such as PyInputPlus. You can import the module with import pyinputplus as pyip so that you can enter a shorter name when calling the module\u2019s functions.\n\nPyInputPlus has functions for entering a variety of input, including strings, numbers, dates, yes/no, True / False , emails, and files. While input() always returns a string, these functions return the value in an appropriate data type. The inputChoice() function allow you to select one of several pre-selected options, while inputMenu() also adds numbers or letters for quick selection.\n\nAll of these functions have the following standard features: stripping whitespace from the sides, setting timeout and retry limits with the timeout and limit keyword arguments, and passing lists of regular expression strings to allowRegexes or blockRegexes to include or exclude particular responses. You'll no longer need to write your own tedious while loops that check for valid input and reprompt the user.\n\nIf none of the PyInputPlus module\u2019s, functions fit your needs, but you\u2019d still like the other features that PyInputPlus provides, you can call inputCustom() and pass your own custom validation function for PyInputPlus to use. The documentation at https://pyinputplus.readthedocs.io/en/latest/ has a complete listing of PyInputPlus\u2019s functions and additional features. There\u2019s far more in the PyInputPlus online documentation than what was described in this chapter. There\u2019s no use in reinventing the wheel, and learning to use this module will save you from having to write and debug code for yourself.\n\nNow that you have expertise manipulating and validating text, it\u2019s time to learn how to read from and write to files on your computer\u2019s hard drive.\n\n### Practice Questions\n\n1. Does PyInputPlus come with the Python Standard Library?\n\n2. Why is PyInputPlus commonly imported with import pyinputplus as pyip ?\n\n3. What is the difference between inputInt() and inputFloat() ?\n\n4. How can you ensure that the user enters a whole number between 0 and 99 using PyInputPlus?\n\n5. What is passed to the allowRegexes and blockRegexes keyword arguments?\n\n6. What does inputStr(limit=3) do if blank input is entered three times?\n\n7. What does inputStr(limit=3, default='hello') do if blank input is entered three times?\n\n### Practice Projects\n\nFor practice, write programs to do the following tasks.\n\n#### Sandwich Maker\n\nWrite a program that asks users for their sandwich preferences. The program should use PyInputPlus to ensure that they enter valid input, such as:\n\n- Using inputMenu() for a bread type: wheat, white, or sourdough.\n- Using inputMenu() for a protein type: chicken, turkey, ham, or tofu.\n- Using inputYesNo() to ask if they want cheese.\n- If so, using inputMenu() to ask for a cheese type: cheddar, Swiss, or mozzarella.\n- Using inputYesNo() to ask if they want mayo, mustard, lettuce, or tomato.\n- Using inputInt() to ask how many sandwiches they want. Make sure this number is 1 or more.\n\nCome up with prices for each of these options, and have your program display a total cost after the user enters their selection.\n\n#### Write Your Own Multiplication Quiz\n\nTo see how much PyInputPlus is doing for you, try re-creating the multiplication quiz project on your own without importing it. This program will prompt the user with 10 multiplication questions, ranging from 0 \u00d7 0 to 9 \u00d7 9. You\u2019ll need to implement the following features:\n\n- If the user enters the correct answer, the program displays \u201cCorrect!\u201d for 1 second and moves on to the next question.\n- The user gets three tries to enter the correct answer before the program moves on to the next question.\n- Eight seconds after first displaying the question, the question is marked as incorrect even if the user enters the correct answer after the 8-second limit.\n\nCompare your code to the code using PyInputPlus in \u201cProject: Multiplication Quiz\u201d on page 196.",
  "difficulty": "intro",
  "doc_id": "doc-8input-validation-775383f118",
  "provenance": {
    "author": "",
    "date": "",
    "license": "CC BY-NC-SA 3.0",
    "source_file": "data/corpus_raw/scraped/2e_chapter8_88673c.json",
    "url": "https://automatetheboringstuff.com/2e/chapter8/"
  },
  "title": "8INPUT VALIDATION",
  "type": "tutorial"
}